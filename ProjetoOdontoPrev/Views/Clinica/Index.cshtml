@model IEnumerable<Clinica>

@{
    ViewBag.Title = "Atendimentos Pendentes";
}

<div class="container">
    <h2>@ViewBag.Title</h2>

    <!-- Mensagem se não houver atendimentos pendentes -->
    @if (ViewBag.Mensagem != null)
    {
        <div class="alert alert-info">
            @ViewBag.Mensagem
        </div>
    }
    else
    {
        <!-- Exibe os atendimentos pendentes -->
        <div class="row">
            @foreach (var clinica in Model)
            {
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">@clinica.NomeClinica</h5>
                            <p><strong>Status:</strong> @clinica.StatusClinica</p>
                            <p><strong>CEP:</strong> @clinica.CEP_Clinica</p>
                            <p><strong>Pesquisa:</strong> @clinica.NotaPesquisa</p>
                            <p><strong>Pontuação:</strong> @clinica.Pontuacao</p>

                            <!-- Botões para aceitar ou recusar -->
                            @if (clinica.StatusClinica != "Aceito" && clinica.StatusClinica != "Recusado")
                            {
                                <form action="@Url.Action("Responder", "Clinica", new { id = clinica.ID_Cliente, resposta = 1 })" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-success">Aceitar</button>
                                </form>
                                <form action="@Url.Action("Responder", "Clinica", new { id = clinica.ID_Cliente, resposta = 2 })" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-danger">Recusar</button>
                                </form>
                            }
                            else
                            {
                                <p><strong>Já foi respondido:</strong> @clinica.StatusClinica</p>
                            }

                            <a href="@Url.Action("Agenda", "Clinica", new { id = clinica.ID_Cliente })" class="btn btn-primary">Ver Detalhes</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>
